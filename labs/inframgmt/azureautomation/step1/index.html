<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.108.0"><meta name=description content="SAP on Microsoft - Tutorials"><meta name=author content="Alexandre Bicas"><link rel=icon href=https://samuelolu97.github.io/images/favicon.png type=image/png><title>Setup Azure Automation for SAP :: SAP on Microsoft - Tutorials</title><link href=https://samuelolu97.github.io/css/nucleus.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/fontawesome-all.min.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/hybrid.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/featherlight.min.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/perfect-scrollbar.min.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/auto-complete.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/atom-one-dark-reasonable.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/theme.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/tabs.css?1670979399 rel=stylesheet><link href=https://samuelolu97.github.io/css/hugo-theme.css?1670979399 rel=stylesheet><script src=https://samuelolu97.github.io/js/jquery-3.3.1.min.js?1670979399></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step1/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><img src=https://samuelolu97.github.io/images/newlogo.png></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=https://samuelolu97.github.io/js/lunr.min.js?1670979399></script>
<script type=text/javascript src=https://samuelolu97.github.io/js/auto-complete.js?1670979399></script>
<script type=text/javascript>var baseurl="https://samuelolu97.github.io/"</script><script type=text/javascript src=https://samuelolu97.github.io/js/search.js?1670979399></script></div><section id=homelinks><ul><li><a class=padding href=https://samuelolu97.github.io/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/env_setup/ title="Environment Setup" class=dd-item><a href=https://samuelolu97.github.io/env_setup/>Environment Setup
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/env_setup/azure_setup/ title="Azure Setup for SAP CAL" class=dd-item><a href=https://samuelolu97.github.io/env_setup/azure_setup/><b></b>Azure Setup for SAP CAL
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/env_setup/azure_setup/azuread/ title="Create and Azure Active Directory application" class=dd-item><a href=https://samuelolu97.github.io/env_setup/azure_setup/azuread/><b>1. </b>Create and Azure Active Directory application
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/env_setup/azure_setup/adrole/ title="Assign Role to Application" class=dd-item><a href=https://samuelolu97.github.io/env_setup/azure_setup/adrole/><b>2. </b>Assign Role to Application
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/env_setup/azure_setup/getinfo/ title="Get required information" class=dd-item><a href=https://samuelolu97.github.io/env_setup/azure_setup/getinfo/><b>3. </b>Get required information
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/env_setup/sap_cal/ title="SAP Cloud Appliance Library (CAL)" class=dd-item><a href=https://samuelolu97.github.io/env_setup/sap_cal/>SAP Cloud Appliance Library (CAL)
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/env_setup/sap_cal/accsetup/ title="SAP CAL Account Setup" class=dd-item><a href=https://samuelolu97.github.io/env_setup/sap_cal/accsetup/><b>1. </b>SAP CAL Account Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/env_setup/sap_cal/rdpacc/ title="Remote Desktop Access" class=dd-item><a href=https://samuelolu97.github.io/env_setup/sap_cal/rdpacc/><b>2. </b>Remote Desktop Access
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/env_setup/datagwsetup/ title="Microsoft On-premises Data Gateway Installation" class=dd-item><a href=https://samuelolu97.github.io/env_setup/datagwsetup/><b></b>Microsoft On-premises Data Gateway Installation
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/env_setup/datagwsetup/step1/ title="Remote Desktop Setup" class=dd-item><a href=https://samuelolu97.github.io/env_setup/datagwsetup/step1/><b>1. </b>Remote Desktop Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/env_setup/datagwsetup/step2/ title="Azure Data Gateway Setup" class=dd-item><a href=https://samuelolu97.github.io/env_setup/datagwsetup/step2/><b>2. </b>Azure Data Gateway Setup
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/env_setup/demogw/ title="SAP Gateway Demo System" class=dd-item><a href=https://samuelolu97.github.io/env_setup/demogw/><b></b>SAP Gateway Demo System
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/env_setup/demogw/step1/ title="Creating and account" class=dd-item><a href=https://samuelolu97.github.io/env_setup/demogw/step1/><b>1. </b>Creating and account
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/labs/ title="SAP on Microsoft Labs" class="dd-item
parent"><a href=https://samuelolu97.github.io/labs/>SAP on Microsoft Labs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/ title="Extend and Innovate" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/><b></b>Extend and Innovate
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/logicapps/ title="Azure Logic Apps" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/logicapps/><b></b>Azure Logic Apps
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/logicapps/step1/ title="Create a Logic App" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/logicapps/step1/><b>1. </b>Create a Logic App
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/logicapps/step2/ title="Create a Workflow" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/logicapps/step2/><b>2. </b>Create a Workflow
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/logicapps/step3/ title="Running the lab" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/logicapps/step3/><b>3. </b>Running the lab
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/autoint/virtualagents/ title="Power Virtual Agent" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/virtualagents/><b></b>Power Virtual Agent
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/virtualagents/step1/ title="Creating our Chatbot" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/virtualagents/step1/><b>1. </b>Creating our Chatbot
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/virtualagents/step2/ title="Testing our Chatbot" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/virtualagents/step2/><b>2. </b>Testing our Chatbot
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/virtualagents/step3/ title="Publishing to Teams" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/virtualagents/step3/><b>3. </b>Publishing to Teams
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/autoint/powerapps/ title="Power Apps" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerapps/><b></b>Power Apps
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/powerapps/step1/ title="SAP Custom Connector" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerapps/step1/><b>1. </b>SAP Custom Connector
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerapps/step2/ title="Create Power App" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerapps/step2/><b>2. </b>Create Power App
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerapps/step3/ title="Enhance the App" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerapps/step3/><b>3. </b>Enhance the App
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerapps/step4/ title="Publish to Teams" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerapps/step4/><b>4. </b>Publish to Teams
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/autoint/office365flow/ title="Power Automate Flow" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/office365flow/><b></b>Power Automate Flow
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/office365flow/step1/ title="SAP Custom Connector" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/office365flow/step1/><b>1. </b>SAP Custom Connector
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/office365flow/step2/ title="Preparing OneDrive" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/office365flow/step2/><b>2. </b>Preparing OneDrive
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/office365flow/step3/ title="Building the Flow" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/office365flow/step3/><b>3. </b>Building the Flow
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/office365flow/step4/ title="Testing the Automation" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/office365flow/step4/><b>4. </b>Testing the Automation
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/autoint/automate/ title="Power Automate RPA" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/automate/><b></b>Power Automate RPA
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerbi/ title="Power BI" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerbi/><b></b>Power BI
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/autoint/powerbi/step1/ title="HANA Demo DB Setup " class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerbi/step1/><b>1. </b>HANA Demo DB Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerbi/step2/ title="From HANA Objects" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerbi/step2/><b>2. </b>From HANA Objects
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/autoint/powerbi/step3/ title="From HANA Custom Query" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/powerbi/step3/><b>3. </b>From HANA Custom Query
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/autoint/aibuilder/ title="AI Builder" class=dd-item><a href=https://samuelolu97.github.io/labs/autoint/aibuilder/><b></b>AI Builder
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/dataai/ title="Data & AI" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/><b></b>Data & AI
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/dataai/datafactory/ title="Azure Data Factory" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/datafactory/><b></b>Azure Data Factory
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/dataai/datafactory/step1/ title="Environment Preparation" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/datafactory/step1/><b>1. </b>Environment Preparation
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/dataai/datafactory/step2/ title="HANA Provider" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/datafactory/step2/><b>2. </b>HANA Provider
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/dataai/datafactory/step3/ title="SAP TABLE Provider" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/datafactory/step3/><b>3. </b>SAP TABLE Provider
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/dataai/datafactory/step4/ title="Extracting data" class=dd-item><a href=https://samuelolu97.github.io/labs/dataai/datafactory/step4/><b>4. </b>Extracting data
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/labs/security/ title=Security class=dd-item><a href=https://samuelolu97.github.io/labs/security/><b></b>Security
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/security/adsso/ title="Single Sign On" class=dd-item><a href=https://samuelolu97.github.io/labs/security/adsso/><b></b>Single Sign On
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/security/adsso/step1/ title="Setting up SAP" class=dd-item><a href=https://samuelolu97.github.io/labs/security/adsso/step1/><b>1. </b>Setting up SAP
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/security/adsso/step2/ title="Setup Azure AD, Fiori & SSO" class=dd-item><a href=https://samuelolu97.github.io/labs/security/adsso/step2/><b>2. </b>Setup Azure AD, Fiori & SSO
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/security/adsso/step3/ title="Testing SSO" class=dd-item><a href=https://samuelolu97.github.io/labs/security/adsso/step3/><b>3. </b>Testing SSO
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/security/sentinel/ title="Microsoft Sentinel" class=dd-item><a href=https://samuelolu97.github.io/labs/security/sentinel/><b></b>Microsoft Sentinel
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/inframgmt/ title="Infrastructure and Management" class="dd-item
parent"><a href=https://samuelolu97.github.io/labs/inframgmt/><b></b>Infrastructure and Management
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/inframgmt/monitoring/ title="Monitoring SAP" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/monitoring/><b></b>Monitoring SAP
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/inframgmt/monitoring/step1/ title="Setting up Azure Monitor for SAP" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/monitoring/step1/><b>1. </b>Setting up Azure Monitor for SAP
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/monitoring/step2/ title="HANA Provider" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/monitoring/step2/><b>2. </b>HANA Provider
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/monitoring/step3/ title="Linux Provider" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/monitoring/step3/><b>3. </b>Linux Provider
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/inframgmt/backup/ title="Azure Backup for HANA" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/backup/><b></b>Azure Backup for HANA
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/inframgmt/backup/step1/ title="Setup Azure Backup" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/backup/step1/><b>1. </b>Setup Azure Backup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/backup/step2/ title="Run a Backup" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/backup/step2/><b>2. </b>Run a Backup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/backup/step3/ title="Run a Restore" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/backup/step3/><b>3. </b>Run a Restore
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/labs/inframgmt/azureautomation/ title="Azure Automation Start/Stop" class="dd-item
parent"><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/><b></b>Azure Automation Start/Stop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/inframgmt/azureautomation/step1/ title="Setup Azure Automation for SAP" class="dd-item active"><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step1/><b>1. </b>Setup Azure Automation for SAP
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/azureautomation/step2/ title="Setup VM Tags" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step2/><b>2. </b>Setup VM Tags
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/azureautomation/step3/ title="Starting SAP" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step3/><b>3. </b>Starting SAP
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/azureautomation/step4/ title="Stopping SAP" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step4/><b>4. </b>Stopping SAP
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/inframgmt/azureautomation/step5/ title="Schedule Automation" class=dd-item><a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step5/><b>5. </b>Schedule Automation
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li><li data-nav-id=/labs/iot/ title=IoT class=dd-item><a href=https://samuelolu97.github.io/labs/iot/><b></b>IoT
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/iot/iot/ title="Azure IoT & Logic Apps" class=dd-item><a href=https://samuelolu97.github.io/labs/iot/iot/><b></b>Azure IoT & Logic Apps
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/labs/iot/iot/step1/ title="IoT Hub Setup" class=dd-item><a href=https://samuelolu97.github.io/labs/iot/iot/step1/><b></b>IoT Hub Setup
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/iot/iot/step2/ title="Building the LogicApp" class=dd-item><a href=https://samuelolu97.github.io/labs/iot/iot/step2/><b></b>Building the LogicApp
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/labs/iot/iot/step3/ title="Testing the lab" class=dd-item><a href=https://samuelolu97.github.io/labs/iot/iot/step3/><b></b>Testing the lab
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul></li></ul></li><li data-nav-id=/cleanup/ title="Environment Cleanup" class=dd-item><a href=https://samuelolu97.github.io/cleanup/><b></b>Environment Cleanup
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://github.com/abicas/SapOnMicrosoftDemos><i class='fab fa-fw fa-github'></i> GitHub repo</a></li><li><a class=padding href=https://gohugo.io/><i class='fas fa-fw fa-bookmark'></i> Hugo Documentation</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=https://samuelolu97.github.io/>SAP on Microsoft</a> > <a href=https://samuelolu97.github.io/labs/>SAP on Microsoft Labs</a> > <a href=https://samuelolu97.github.io/labs/inframgmt/>Infrastructure and Management</a> > <a href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/>Azure Automation Start/Stop</a> > Setup Azure Automation for SAP</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Setup Azure Automation for SAP</h1><p>In order to have Azure Automation gracefully managing SAP Worklaods, we need to setup the Azure Automate and import some runbooks.</p><p>This section will show the steps required for that to be accomplished:</p><h4 id=azure-automation-setup>Azure Automation Setup</h4><ol><li>Log on to the <a href=https://portal.azure.com>Azure Portal</a> and go to <strong>Automation Accounts</strong>
<img src="https://samuelolu97.github.io/images/startstop-1.png?height=150px" alt=SS1></li><li>Create an Automation Account with the following parameters:</li></ol><ul><li>Resource Group: Pick the SAPCAL-XXXXXXXX created by SAP CAL so we can cleanup properly.</li><li>Account Name: <strong>SAPAutomationAcc</strong></li><li>Region: <strong>East US</strong> (same as SAP)</li><li>Click <strong>Review and Create</strong> and then in <strong>Create</strong>
<img src="https://samuelolu97.github.io/images/startstop-2.png?height=350px" alt=SS1></li></ul><ol start=3><li>Go to the newly create SAPAutomationAcc
<img src="https://samuelolu97.github.io/images/startstop-3.png?height=350px" alt=SS1></li></ol><h4 id=importing-modules>Importing Modules</h4><p>Let&rsquo;s add a Module to run PowerShell commands with SAP.</p><ol start=4><li>On the left pane click on <strong>Modules</strong> and <strong>Add Module</strong>
<img src="https://samuelolu97.github.io/images/startstop-4.png?height=350px" alt=SS1></li><li>Click on <strong>Browse from gallery</strong>
<img src="https://samuelolu97.github.io/images/startstop-5.png?height=350px" alt=SS1></li><li>Search for <strong>SAPAzure</strong> and pick <strong>SAPAzurePowershellModules</strong>
<img src="https://samuelolu97.github.io/images/startstop-6.png?height=150px" alt=SS1></li><li>Click on <strong>Select</strong>
<img src="https://samuelolu97.github.io/images/startstop-7.png?height=350px" alt=SS1></li><li>Pick the Runtime <strong>5.1</strong> and click <strong>Import</strong>
<img src="https://samuelolu97.github.io/images/startstop-8.png?height=350px" alt=SS1></li></ol><h4 id=importing-runbooks>Importing Runbooks</h4><p>Now we will import the template runbooks required for automating SAP. There is an extensive list but we will only use the ones required for the SAP CAL deployment model. Other deployment modules mey need additional modules. Please see <a href=https://github.com/Azure/SAP-on-Azure-Scripts-and-Utilities/tree/main/Start-Stop-Automation/Automation-Backend>the complete documentation</a> for more information.</p><div class="notices info"><p>The procedure below will be executed for 8 Runbooks:</p><ul><li>Stop-SAPSystem</li><li>Start-SAPSystem</li><li>List-SAPSystemInstances</li><li>Stop-SAPHANA</li><li>Start-SAPHANA</li><li>List-SAPHANAInstance</li><li>Start-SAPApplicationServer</li><li>Stop-SAPApplicationServer</li></ul><p>Please at the end of this procedure, repeat the sequence for the remaining runbooks</p></div><ol start=9><li>On the left pane click on <strong>Runbooks</strong> and <strong>Import a Runbook</strong>
<img src="https://samuelolu97.github.io/images/startstop-9.png?height=350px" alt=SS1></li><li>Go to <strong>Browse from gallery</strong>
<img src="https://samuelolu97.github.io/images/startstop-10.png?height=350px" alt=SS1></li><li>Search for the Runbook Name from the list above and pick <strong>Source: Powershell Gallery</strong>. In this example we are searching for <strong>Stop-SAPSystem</strong> but you will do the same procedure for all the 8 Runbooks required.
<img src="https://samuelolu97.github.io/images/startstop-11.png?height=250px" alt=SS1></li><li>Click <strong>Select</strong>
<img src="https://samuelolu97.github.io/images/startstop-12.png?height=350px" alt=SS1></li><li>Use the <strong>same name</strong>from the template, pick runtime <strong>5.1</strong> and click <strong>Import</strong>
<img src="https://samuelolu97.github.io/images/startstop-13.png?height=350px" alt=SS1></li><li>Click on <strong>Publish</strong> and <strong>Yes</strong>
<img src="https://samuelolu97.github.io/images/startstop-14.png?height=350px" alt=SS1></li><li>Go back to <strong>SAPAutomationAcc</strong> by clicking on the top link
<img src="https://samuelolu97.github.io/images/startstop-15.png?height=350px" alt=SS1></li><li>Repeat the process for all the other runbooks.
<img src="https://samuelolu97.github.io/images/startstop-16.png?height=350px" alt=SS1></li></ol><p>At the end your <strong>SAPAutomationAcc</strong> screen should look like this, with all the 8 runbooks imported:
<img src="https://samuelolu97.github.io/images/startstop-17.png?height=350px" alt=SS1></p><h4 id=adding-execution-permissions-run-as-accounts>Adding Execution Permissions (Run As Accounts)</h4><p>In order to start and stop SAP, Azure Automation needs to log in as root to those VMs. Let&rsquo;s give it the permissions for this:</p><ol start=4><li>Go back to the <strong>SAPAutomationAcc</strong>, scroll down the left panel and select <strong>Run as accounts</strong>. Click on <strong>Azure Run As Accounts</strong>
<img src="https://samuelolu97.github.io/images/startstop-20.png?height=400px" alt=SS1></li><li>Wait until the green checkmark is added to the option. This will expire in 365 days.
<img src="https://samuelolu97.github.io/images/startstop-21.png?height=400px" alt=SS1></li></ol><p>Congratulations, you have configured the Azure Automation and imported the required runbooks.Now let&rsquo;s move to the next section and add Tags to our VMs so the script can identify the VMs properly.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/ title="Azure Automation Start/Stop"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=https://samuelolu97.github.io/labs/inframgmt/azureautomation/step2/ title="Setup VM Tags" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=https://samuelolu97.github.io/js/clipboard.min.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/perfect-scrollbar.min.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/perfect-scrollbar.jquery.min.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/jquery.sticky.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/featherlight.min.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/highlight.pack.js?1670979399></script>
<script>hljs.initHighlightingOnLoad()</script><script src=https://samuelolu97.github.io/js/modernizr.custom-3.6.0.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/learn.js?1670979399></script>
<script src=https://samuelolu97.github.io/js/hugo-learn.js?1670979399></script>
<script src=https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js></script>
<script>mermaid.initialize({startOnLoad:!0})</script></body></html>